
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cmungall.github.io/linkml-transformer/overview/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>Overview - LinkML-Transformer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mapping-between-linkml-schemas" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="LinkML-Transformer" class="md-header__button md-logo" aria-label="LinkML-Transformer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LinkML-Transformer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cmungall/linkml-transformer/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LinkML-Transformer" class="md-nav__button md-logo" aria-label="LinkML-Transformer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    LinkML-Transformer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cmungall/linkml-transformer/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Index
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about.md" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Overview
      </a>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/cmungall/linkml-transformer/edit/master/docs/overview.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="mapping-between-linkml-schemas">Mapping Between LinkML Schemas</h1>
<h1 id="draft">Draft</h1>
<p>2022-06-24</p>
<h1 id="problem-map-data-from-one-schema-to-another">Problem: map data from one schema to another</h1>
<ul>
<li>Problem: Map d1 → d2</li>
<li>Assumption d1 and d2 conform to two separate schemas\, s1→ s2</li>
<li>Sub-problems:</li>
<li>Ingest/Import: my data warehouse conforms to s2 (e.g. Monarch ingest)</li>
<li>Export: make my data ingest friendly</li>
<li>Migrations: s1 and s2 are different versions of the same schema</li>
<li>Not in scope: in-schema syntactic or structural transforms</li>
<li>JSON to YAML\, JSON to TSV\, JSON to SQL\, JSON to RDF\, ORM\, …</li>
<li>In LinkML this is already largely solved</li>
<li>The actual problem space is highly varied</li>
<li>S1 and S2 may be trivially isomorphic</li>
<li>S1 and S2 may differ in complex or nuanced ways</li>
</ul>
<h1 id="there-are-many-existing-approaches">There are many existing approaches</h1>
<ul>
<li>Generic frameworks\, driven by declarative specification in Domain Specific Language (DSL)</li>
<li>JSON-based</li>
<li>Google whistle</li>
<li><em><a href="https://www.npmjs.com/package/jsonpath-lifter">jsonpath-lift</a></em></li>
<li>XSLT</li>
<li>Semweb</li>
<li>YARRML\, R2RML</li>
<li>Many many more…</li>
<li>Bespoke transforms: non-declarative</li>
<li>Implement in python/awk/etc.</li>
<li>Hybrid: bespoke with some declarative mappings in ad-hoc format</li>
<li>E.g. NMDC ingest framework</li>
</ul>
<h1 id="traps-with-declarative-mapping">Traps with declarative mapping</h1>
<ul>
<li>Declarative is great\, until it’s not</li>
<li>Anti-patterns:</li>
<li>Insufficient expressivity to carry out real world tasks</li>
<li>Bolting on features to mapping DSL until it’s a fully-featured Turing-complete language</li>
<li>Optimization/scalability at mercy of framework</li>
<li>Messy layering between DSL and host language<ul>
<li>It can be useful to leverage host language features (e.g arbitrary python function)</li>
<li>But this can get confusing:</li>
<li>NFNF: Neither fish nor fowl</li>
<li>Limits optimizations (forces iterative host language calls)</li>
</ul>
</li>
</ul>
<h1 id="yarrrml">YARRRML</h1>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas0.png" /></p>
<p><span style="color:#1A73E8"> <em><a href="https://rml.io/yarrrml/">https://rml.io/yarrrml/</a></em> </span></p>
<h1 id="yarrrml-notes">YARRRML notes</h1>
<ul>
<li>Has a playground\, which is great</li>
<li>Mixes two concerns:</li>
<li>1. Isomorphic structural mapping between JSON/TSVs and RDF (already covered by JSON-LD)</li>
<li>2. Mapping</li>
<li>This isn’t necessarily bad - it’s quite practical\, but a little unsatisfying IMO</li>
</ul>
<h1 id="jsonpath-lifter">jsonpath-lifter</h1>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas1.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas2.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas3.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas4.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas5.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas6.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas7.png" /></p>
<p>Was proposed for CCDH CRDC-node mappings</p>
<p>Doesn’t seem widely used</p>
<p>Is there a big advantage over simply writing javascript functions?</p>
<h1 id="koza-previously-bioweave">Koza (previously: bioweave)</h1>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas8.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas9.png" /></p>
<h1 id="etl-frameworks">ETL frameworks</h1>
<ul>
<li>There are many many ETL frameworks</li>
<li>E.g. WebKarma</li>
<li>Inherently mixing of concerns</li>
<li>Here we are concerned with the “T” part</li>
<li>Do existing frameworks separate out the T as a modular composable component?</li>
<li>I’m not sure</li>
</ul>
<h1 id="do-we-need-yet-another-mapping-framework">Do we need Yet Another Mapping Framework?</h1>
<ul>
<li>LinkML philosophy:</li>
<li>Embrace\, extend\,  <em>parasitize</em></li>
<li>Develop lightweight ways to map</li>
<li>Map mappings to existing mapping frameworks<ul>
<li>This actually makes sense even if it sounds kind of meta…</li>
</ul>
</li>
</ul>
<h1 id="level-0-mapping-isomorphic-same-uris">Level 0 Mapping: Isomorphic, same URIs</h1>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>classes:</p>
<p>Agent:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>home_address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<h1 id="level-0-handled-by-standard-linkml-convert-tofrom-rdf">Level 0: handled by standard linkml convert to/from RDF</h1>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>classes:</p>
<p>Agent:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>home_address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p><em>data2 (yaml/json)</em></p>
<p><em>d</em>  <em>ata1 (yaml/json)</em></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><em>d</em>  <em>ata1.ttl == data2.ttl</em></p>
<p>[sdo:familyName “Wu” ;</p>
<p>sdo:address “1 my street\, Oakville”</p>
<p>]</p>
<h1 id="level-0-enums-todo-add-example-here-basically-this-works-the-same-way">Level 0: Enums TODO: add example here. Basically this works the same way</h1>
<h1 id="level-0-howto">Level 0: HOWTO</h1>
<p>Compose two commands:</p>
<p>linkml-convert -s schema1.yaml data1.yaml -o data1.ttl</p>
<p>linkml-convert -s schema2.yaml data1.ttl -o data2.yaml</p>
<p>That’s it!</p>
<p>TODO:</p>
<p>Write a wrapper (linkml-map-data?) that does this in one command</p>
<h1 id="level-0-other-considerations">Level 0: other considerations</h1>
<ul>
<li>Going via RDF in theory eliminates inlining differences</li>
<li>E.g. s1 inlines address objects\, s2 uses references (inlined: false) and includes a separate index slot for addresses</li>
<li>Current status:</li>
<li>Currently when going from s1 to s2\, no index slots are generated</li>
<li>This could be done as part of the general rdflib framework</li>
</ul>
<h1 id="lessons-learned-so-far-annotate-your-schema-with-uris">Lessons learned so far: annotate your schema with URIs!</h1>
<ul>
<li>Annotating schemas with URIs is  <em>optional</em>  with LinkML</li>
<li>But your future self and data users will thank you for careful schema annotation!</li>
<li>Hints:</li>
<li>Schema-automator can provide suggestions for your element and enum URIs</li>
<li>Sometimes plain semweb URIs (e.g. schema.org) can be easier for interoperation than overly granular OBO ones<ul>
<li>E.g modeling Personhood as a  <em>role</em>  vs straightforward schema:Person</li>
</ul>
</li>
</ul>
<h1 id="level-1-mapping-isomorphic-different-uris">Level 1 Mapping: Isomorphic, different URIs</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<h1 id="level-1-mapping-mediated-by-uri-mapping">Level 1 Mapping: mediated by URI mapping</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<table>
<thead>
<tr>
<th align="center">subject_id</th>
<th align="center">object_id</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sdo:Person</td>
<td align="center">NCBITaxon:9606</td>
</tr>
<tr>
<td align="center">sdo:familyName</td>
<td align="center">IAO:nnnn</td>
</tr>
<tr>
<td align="center">sdo:address</td>
<td align="center">IAO:0000422</td>
</tr>
</tbody>
</table>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p>[sdo:familyName “Wu”</p>
<p>sdo:address “1 my street\, Oakville”</p>
<p>]</p>
<p>[sdo:familyName “Wu”</p>
<p>sdo:address “1 my street\, Oakville”</p>
<p>]</p>
<h1 id="level-1-howto">Level 1: HOWTO</h1>
<ul>
<li>Compose three commands:</li>
<li>linkml-convert -s schema1.yaml data1.yaml -o data1.ttl</li>
<li>sssom-map-iris -i data1.ttl -m schema1-to-schema2.sssom.tsv -o data2.ttl</li>
<li>linkml-convert -s schema2.yaml data2.ttl -o data2.yaml</li>
<li>That’s it!</li>
<li>TODO:</li>
<li>sssom-map-iris does not yet exist (?)\, but should be trivial</li>
<li>Fold into wrapper CLI tool</li>
<li>Nuances:</li>
<li>Schemas have nuanced differences: not everything with be skos:exact</li>
<li>We can distinguish 3 flavors of level 1 mapping:</li>
<li>Precise\, bidirectional: follow exact only</li>
<li>Valid\, unidirectional: follow exact + broad</li>
<li>Loose: any mapping</li>
</ul>
<h1 id="level-1-variant-mappings-in-schema">Level 1 variant: mappings in schema</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p><strong>    </strong> exact_mappings: [“NCBITaxon:9606”]</p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p><strong>        exact_mappings: [“IAO:nnnn”]</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p><strong>        exact_mappings: [“IAO:0000422”]</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p>[sdo:familyName “Wu”</p>
<p>sdo:address “1 my street\, Oakville”</p>
<p>]</p>
<p>[sdo:familyName “Wu”</p>
<p>sdo:address “1 my street\, Oakville”</p>
<p>]</p>
<h1 id="advantages-of-rdf-as-an-intermediate">Advantages of RDF as an intermediate</h1>
<ul>
<li>Use of IRIs</li>
<li>Separation of concerns</li>
<li>Structural differences (e.g. inlining) are already handled by linkml convert</li>
<li>Allows us to focus on semantic mappings</li>
</ul>
<h1 id="lessons-learned-so-far-think-about-mappings">Lessons learned so far: think about mappings</h1>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas10.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas11.png" /></p>
<p><em><a href="https://linkml.io/linkml/faq/modeling.html#when-is-it-important-to-have-mappings">https://linkml.io/linkml/faq/modeling.html#when-is-it-important-to-have-mappings</a></em></p>
<p><em><a href="https://github.com/alliance-genome/agr_curation_schema/blob/main/model/schema/agent.yaml">https://github.com/alliance-genome/agr_curation_schema/blob/main/model/schema/agent.yaml</a></em></p>
<h1 id="more-complex-mappings-level-2-and-above">More complex mappings: level 2 and above</h1>
<ul>
<li>TODO: define levels 2 and above</li>
<li>Examples of kinds of features:</li>
<li>merging/splitting fields; e.g. full_name = first + “ “ + last</li>
<li>Unit conversion or baked-in units to explicit units</li>
<li>Normalization/denormalization (aka flattening)</li>
<li>Complex logic<ul>
<li>If conditions A\, B\, C and not D are met then copy field F from X to Y</li>
</ul>
</li>
</ul>
<h1 id="linkml-rule-and-inference-framework">LinkML Rule and Inference Framework</h1>
<ul>
<li>Current use case is  <strong>intra-schema</strong>  inference</li>
<li>Easy to invoke on command line</li>
<li>Needs more docs!</li>
<li>Could form basis of  <strong>inter-schema</strong>  DSL</li>
<li>Examples</li>
<li>Schemas differ in units</li>
<li>Schemas differ in categorical vs quantitative</li>
</ul>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas12.png" /></p>
<p>Current use case is  <strong>intra-schema</strong>  inference</p>
<p>Could form basis of  <strong>inter-schema</strong>  DSL</p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas13.png" /></p>
<h1 id="datalog">Datalog</h1>
<p>Datalog could serve as the powerful basis of an expressive declarative transformation language</p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas14.png" /></p>
<p><em><a href="https://linkml.io/linkml-datalog">https://linkml.io/linkml-datalog</a></em></p>
<h1 id="approach-for-level-2">Approach for level 2+</h1>
<ul>
<li>Do we even want a generic mapping framework in LinkML here?</li>
<li>This is a good “ <strong>parasitization</strong>  hook”</li>
<li>Do complex stuff using an existing framework</li>
<li>TBD: derive or semi-derive mapping specification?</li>
<li>This is also a code bespoke procedural code hook</li>
<li>Do the generic stuff with linkml-convert and isomorphic IRI mapping</li>
<li>Do more complex stuff in code</li>
</ul>
<h1 id="general-approach-for-level-2-same-to-same">General approach for level 2+; same to same</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p>JSON  <em>OR</em>  XML  <em>OR</em>  YAML  <em>OR</em>  RDF  <em>OR</em>  SQL</p>
<p><strong>JSON </strong>  <em>OR</em>  <strong> XML </strong>  <em>OR</em>  <strong> YAML </strong>  <em>OR</em>  <strong> RDF </strong>  <em>OR</em>  <strong> SQL</strong></p>
<p><strong>(matches the one on the left)</strong></p>
<p><strong>Existing </strong>  <strong>mapping</strong>  <strong> framework (X to X)</strong></p>
<h1 id="example-of-same-to-same-jsonpath-lifter">Example of same-to-same: jsonpath-lifter</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><strong>Jsonpath-lifter (JSON to JSON)</strong></p>
<h1 id="example-of-same-to-same-awk">Example of same-to-same: awk</h1>
<h1 id="example-of-same-to-same-sql">Example of same-to-same: SQL</h1>
<p>INSERT INTO Agent AS SELECT</p>
<p>Person.last_name AS Agent.surname\,</p>
<p>CONCAT(Person.full_name\, “ “\, Person.first) AS Agent.full_name\,</p>
<p>…</p>
<p>CONSTRUCT {</p>
<p>[</p>
<p>a schema:Person ;</p>
<p>my:fullName STRCAT(...)</p>
<p>]</p>
<p>}</p>
<p>WHERE {</p>
<p>?person a schema:Person ;</p>
<p>schema:firstName ;</p>
<p>schema:lastName ;</p>
<p>…</p>
<p>}</p>
<p><strong>SPARQL CONSTRUCT</strong></p>
<p><strong>RDF</strong>  <strong> Engine or Triplestore</strong></p>
<h1 id="example-of-same-to-same-python-linkml-objects">Example of same-to-same: Python (LinkML objects)</h1>
<p>def convert(p: Person) -&gt; Agent:</p>
<p>return Agent(p.id\,</p>
<p>full_name=f”{..} {..}”\,</p>
<p>…</p>
<p><strong>Conversion script</strong></p>
<h1 id="general-approach-for-level-2-heteromorphic">General approach for level 2+; heteromorphic</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><em>L</em>  <em>inkml-convert</em></p>
<p><em>OPTIONAL</em></p>
<p><em>L</em>  <em>inkml-convert</em></p>
<p><em>OPTIONAL</em></p>
<p>JSON  <em>OR</em>  XML  <em>OR</em>  YAML  <em>OR</em>  RDF  <em>OR</em>  SQL</p>
<p><strong>JSON </strong>  <em>OR</em>  <strong> XML </strong>  <em>OR</em>  <strong> YAML </strong>  <em>OR</em>  <strong> RDF </strong>  <em>OR</em>  <strong> SQL</strong></p>
<p><strong>(</strong>  <em>different</em>  <strong> from the one on the left)</strong></p>
<p><strong>Existing mapping framework (X to Y)</strong></p>
<h1 id="example-yarrrml">Example: YARRRML</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas15.png" /></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><strong>YARRRML (JSON/YAML to RDF)</strong></p>
<h1 id="example-yarrrml-native-mappings">Example: YARRRML, native mappings</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><strong>mapping.yarrrml.yml</strong></p>
<h1 id="example-yarrrml-compiled-mappings">Example: YARRRML, compiled mappings</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>Mappings <strong>:</strong></p>
<p><strong>   … \&lt; TO BE DEFINED LINKML MAPPING SPEC &gt;</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<p><strong>mapping.yarrrml.yml</strong></p>
<h1 id="hyperparasitism-is-good">Hyperparasitism is good</h1>
<p>name: example-semweb-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>sdo:Person</strong></p>
<p>attributes:</p>
<p>family_name:</p>
<p>slot_uri:  <strong>sdo:familyName</strong></p>
<p>address:</p>
<p>slot_uri:  <strong>sdo:address</strong></p>
<p>Mappings <strong>:</strong></p>
<p><strong>   … \&lt; TO BE DEFINED LINKML MAPPING SPEC &gt;</strong></p>
<p>name: example-OBO-schema</p>
<p>classes:</p>
<p>Person:</p>
<p>class_uri:  <strong>NCBITaxon:9606</strong>   <span style="color:#999999">## Homo sapiens</span></p>
<p>attributes:</p>
<p>surname:</p>
<p>slot_uri:  <strong>IAO:0000590</strong>   <span style="color:#999999">## written name</span></p>
<p>home_address:</p>
<p>slot_uri:  <strong>IAO:0000422</strong>   <span style="color:#999999">## postal address</span></p>
<p><strong>mapping.yarrrml.yml</strong></p>
<p>family_name: Wu</p>
<p>address: 1 my street\, Oakville</p>
<p>surname: Wu</p>
<p>home_address: 1 my street\, Oakville</p>
<h1 id="alternative-direct-translation-language">Alternative: Direct translation language</h1>
<ul>
<li>Desiderata</li>
<li>Ability to compile to scalable frameworks</li>
<li>E.g. compile to SQL</li>
<li>Simple for simple tasks</li>
<li>Layer on existing expression language</li>
<li>Provides path to safe subset of host language (Python)</li>
<li>Can be easily implemented in other languages</li>
</ul>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas16.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas17.png" /></p>
<h1 id="normalized-to-denormalized-modeling-sssom">Normalized to Denormalized (modeling SSSOM)</h1>
<p>SQL INSERT (or CREATE VIEW)</p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas18.png" /></p>
<p>SQL FROM Clause</p>
<p>(implicit INNER JOIN/WHERE)</p>
<p>SQL SELECT … AS clause</p>
<h1 id="relationship-to-profiles-todo">Relationship to profiles TODO</h1>
<p>Profiles/IGs can be seen as a sub-case of schema mapping</p>
<h1 id="current-progress">Current progress</h1>
<p><em><a href="https://github.com/linkml/linkml/issues/533">https://github.com/linkml/linkml/issues/533</a></em>  map to YARRRML</p>
<p>Vincent Vemonet has started on linkml-&gt;rml</p>
<p><em><a href="https://github.com/vemonet/linkml/blob/add-gen-rml/linkml/generators/rmlgen.py">https://github.com/vemonet/linkml/blob/add-gen-rml/linkml/generators/rmlgen.py</a></em></p>
<h1 id="relationship-to-koza">Relationship to Koza</h1>
<h1 id="koza-ingests-often-require-multiple-files">Koza ingests often require multiple files</h1>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas19.png" /></p>
<p><img alt="" src="../img/Mapping%20Between%20LinkML%20Schemas20.png" /></p>
<h1 id="see-also">See Also</h1>
<p>Revisiting BioWeave (Kent Shefchek\, 2020?)</p>
<p><em><a href="https://docs.google.com/presentation/d/1DYiWXoz3iHM2PvMFD0hRpJ544tnHawg00PBwNuESo44/edit#slide=id.gb33d7ddd1b_0_93">https://docs.google.com/presentation/d/1DYiWXoz3iHM2PvMFD0hRpJ544tnHawg00PBwNuESo44/edit#slide=id.gb33d7ddd1b_0_93</a></em></p>
<h1 id="automating-mapping">Automating mapping</h1>
<ul>
<li>Should we pursue approaches to automate mapping?</li>
<li>Some of the functionality is already in schema-automator. E.g. auto-annotating schema elements using ontologies</li>
<li>Isomorphic schema mapping discovery analogous to ontology mapping</li>
<li>Can a boomer type approach help?<ul>
<li>E.g. given multiple loose mappings with alternative interpretations\, which ones give coherent results</li>
</ul>
</li>
<li>Other approaches</li>
<li>Inductive Logic Programming: transformations as logic programs</li>
<li>Genetic programming: transformations as lambda functions</li>
<li>Deep Learning: e.g. Language Models for translation</li>
<li>There is already a rich literature spanning decades here to be parasitized…</li>
</ul>
<h1 id="summary-just-tell-me-what-to-do-today">Summary: just tell me what to do today</h1>
<ul>
<li>For isomorphic mappings:</li>
<li>Stay within LinkML/SSSOM</li>
<li>No need for custom code\, it all works</li>
<li>For complex mappings:</li>
<li>It depends!</li>
<li>Do the structural mapping with linkml-convert</li>
<li>Implement the complex logic as you see fit\, depending on multiple factors. Any of the following may be valid<ul>
<li>Koza</li>
<li>Awk</li>
<li>SPARQL CONSTRUCTS or SELECTS</li>
<li>Custom python</li>
<li>YARRRML</li>
<li>SQL INSERTs</li>
<li>XSLT</li>
<li>Jsonpath-lifter</li>
<li>….</li>
</ul>
</li>
</ul>
<h1 id="roadmap">Roadmap</h1>
<ul>
<li>2022: Continue to gather use cases\, experiment</li>
<li>2023: If funding permits</li>
<li>Extend metamodel to include complex mapping</li>
<li>Implement EITHER<ul>
<li>Parasitizing converters</li>
<li>Direct mapping framework</li>
</ul>
</li>
<li>TBD: Is this Koza2?</li>
</ul>




              
            </article>
            
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Index" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Index
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>